<div class="carousel">
  <div class="cards">
    <div *ngFor="let place of getDisplayedPlaces(); let i = index" class="card">
      <!-- Heart Icon -->
      <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="currentColor"
      [ngClass]="{
        'filled-heart': heartStates[currentIndex + i],
        'outline-heart': !heartStates[currentIndex + i]
      }"
      class="bi heart-icon"
      viewBox="0 0 16 16"
      (click)="toggleHeart(currentIndex + i, place.placeID)"
      aria-label="Toggle wishlist"
    >
      <!-- Filled Heart Path -->
      <path *ngIf="heartStates[currentIndex + i]" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"></path>
    
      <!-- Outline Heart Path -->
      <path *ngIf="!heartStates[currentIndex + i]" d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"></path>
      </svg>

    <div *ngFor="let place of places?.slice(currentIndex, currentIndex + 5)" class="card">
      <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 24 24" class="heart-icon">
        <path d="M16.32,2.487 C17.744,2.403 19.022,2.707 20.212,3.413 C21.682,4.285 22.811,5.8 23.238,7.473 C23.617,8.957 23.45,11.082 22.82,12.782 C22.622,13.317 22.178,14.233 21.898,14.688 C20.227,17.397 17.305,19.624 13.511,21.081 C12.862,21.33 12.137,21.56 12,21.56 C11.863,21.56 11.138,21.33 10.489,21.081 C7.019,19.748 4.189,17.704 2.514,15.32 C1.234,13.498 0.56,11.393 0.561,9.22 C0.562,7.504 1.064,6.135 2.181,4.804 C3.708,2.984 6.259,2.13 8.632,2.645 C9.732,2.883 10.916,3.484 11.684,4.194 L11.988,4.476 L12.324,4.174 C13.433,3.18 14.873,2.572 16.32,2.487 Z M17.7,4.459 C17.395,4.394 16.533,4.347 16.32,4.383 L15.94,4.445 C15.013,4.594 13.975,5.161 13.298,5.89 C13.15,6.049 12.799,6.528 12.518,6.953 L12.008,7.726 L11.474,6.933 C10.866,6.029 10.471,5.597 9.92,5.234 C9.496,4.954 9.275,4.843 8.825,4.684 C8.167,4.452 7.966,4.42 7.2,4.424 C6.429,4.428 6.08,4.493 5.424,4.756 C3.804,5.404 2.661,6.946 2.477,8.728 C2.401,9.47 2.538,10.678 2.8,11.588 C3.685,14.65 6.353,17.235 10.46,19.01 C10.79,19.152 11.272,19.343 11.53,19.434 L12,19.598 L12.47,19.434 C14.806,18.615 17.146,17.199 18.689,15.67 C20.434,13.94 21.359,11.998 21.52,9.725 C21.612,8.427 21.376,7.463 20.727,6.481 C20.042,5.446 18.965,4.725 17.7,4.459 Z M16.769,7.223 L16.759,6.269 L17.061,6.296 C18.23,6.402 19.229,7.25 19.545,8.405 C19.636,8.737 19.635,9.551 19.542,10.122 C19.363,11.226 19,12.158 18.406,13.044 C18.137,13.445 17.507,14.199 17.416,14.228 C17.392,14.236 17.079,13.936 16.722,13.562 L16.072,12.881 L16.338,12.593 C17.031,11.826 17.489,10.875 17.656,9.855 C17.772,9.119 17.733,8.803 17.49,8.519 C17.33,8.332 17.181,8.246 16.947,8.206 L16.78,8.178 Z"/>
      </svg>

      <div *ngIf="place.imageURLs?.$values?.length > 0">

        <div *ngIf="place.imageURLs?.$values?.length > 0" role="button" [routerLink]="['/places',place.placeID]" >
          <img [src]="place.imageURLs.$values[0]" [alt]="place.name" class="card-image">
        </div>

      <!-- <div *ngIf="place.imageURLs?.$values?.length > 0" role="button" [routerLink]="['/places',place.placeID]" >
        <img [src]="place.imageURLs.$values[0]" [alt]="place.name" class="card-image" >
      </div> -->

    <!-- <div *ngIf="place.imageURLs && place.imageURLs.$values && place.imageURLs.$values.length > 0" role="button" [routerLink]="['/places',place.placeID]">
      <img [src]="place.imageURLs.$values[0]" [alt]="place.name" class="card-image">
    </div>  -->

    
    
    
      <!-- Card Title -->
      <h3 class="card-title">{{ place.name }}</h3>

      <!-- Rating -->
      <div class="rating">
        <span *ngFor="let star of [1, 2, 3, 4, 5]; let i = index" class="star">
          <svg width="45" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
          </svg>
        </span>
      </div>
      <p class="category">{{ place.categoryName }}</p>
    </div>
  </div>

  <!-- Navigation Buttons -->
  <img [src]="leftArrowSrc" class="nav-button left" (click)="prevSlide()" aria-label="Previous slide">
  <img [src]="rightArrowSrc" class="nav-button right" (click)="nextSlide()" aria-label="Next slide"> 
</div>
